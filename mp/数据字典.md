# 智慧林草系统 - 环境监测和统计分析模块 数据字典

## 1. 区域信息表（region）

| 字段名 | 数据类型 | 约束 | 描述 |
| ------ | -------- | ---- | ---- |
| region_id | INT | PRIMARY KEY, AUTO_INCREMENT | 区域ID |
| region_name | VARCHAR(100) | NOT NULL, UNIQUE | 区域名称 |
| region_type | VARCHAR(20) | NOT NULL | 区域类型（森林/草地） |
| latitude | DECIMAL(10, 6) | NOT NULL | 纬度 |
| longitude | DECIMAL(10, 6) | NOT NULL | 经度 |
| manager_id | INT | NULL | 负责人ID |
| create_time | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP | 创建时间 |
| update_time | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 更新时间 |

## 2. 环境监测站表（monitoring_station）

| 字段名 | 数据类型 | 约束 | 描述 |
| ------ | -------- | ---- | ---- |
| station_id | INT | PRIMARY KEY, AUTO_INCREMENT | 站点ID |
| station_name | VARCHAR(100) | NOT NULL, UNIQUE | 站点名称 |
| region_id | INT | NOT NULL, FOREIGN KEY(region_id) REFERENCES region(region_id) ON DELETE CASCADE ON UPDATE CASCADE | 所属区域ID |
| latitude | DECIMAL(10, 6) | NOT NULL | 纬度 |
| longitude | DECIMAL(10, 6) | NOT NULL | 经度 |
| altitude | DECIMAL(8, 2) | NULL | 海拔高度 |
| station_type | VARCHAR(50) | NOT NULL | 站点类型 |
| installation_date | DATE | NOT NULL | 安装日期 |
| status | VARCHAR(20) | DEFAULT '正常' | 状态（正常、故障、维护） |
| create_time | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP | 创建时间 |
| update_time | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 更新时间 |

## 3. 传感器信息表（sensor）

| 字段名 | 数据类型 | 约束 | 描述 |
| ------ | -------- | ---- | ---- |
| sensor_id | INT | PRIMARY KEY, AUTO_INCREMENT | 传感器ID |
| sensor_code | VARCHAR(50) | NOT NULL, UNIQUE | 传感器编号 |
| region_id | INT | NOT NULL, FOREIGN KEY(region_id) REFERENCES region(region_id) ON DELETE CASCADE ON UPDATE CASCADE | 部署区域ID |
| station_id | INT | NOT NULL, FOREIGN KEY(station_id) REFERENCES monitoring_station(station_id) ON DELETE CASCADE ON UPDATE CASCADE | 所属站点ID |
| area_id | INT | NOT NULL | 所属区域ID |
| monitoring_type | VARCHAR(50) | NOT NULL | 监测类型（温度、湿度等） |
| device_model | VARCHAR(100) | NOT NULL | 设备型号 |
| installation_date | DATE | NOT NULL | 安装时间 |
| communication_protocol | VARCHAR(50) | NOT NULL | 通信协议 |
| status | VARCHAR(20) | DEFAULT '正常' | 状态（正常、故障、维护） |
| create_time | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP | 创建时间 |
| update_time | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 更新时间 |

## 4. 环境数据采集表（environmental_data）

| 字段名 | 数据类型 | 约束 | 描述 |
| ------ | -------- | ---- | ---- |
| data_id | INT | PRIMARY KEY, AUTO_INCREMENT | 数据ID |
| sensor_id | INT | NOT NULL, FOREIGN KEY(sensor_id) REFERENCES sensor(sensor_id) ON DELETE CASCADE ON UPDATE CASCADE | 传感器ID |
| station_id | INT | NOT NULL, FOREIGN KEY(station_id) REFERENCES monitoring_station(station_id) ON DELETE CASCADE ON UPDATE CASCADE | 站点ID |
| region_id | INT | NOT NULL, FOREIGN KEY(region_id) REFERENCES region(region_id) ON DELETE CASCADE ON UPDATE CASCADE | 区域ID |
| collection_time | DATETIME | NOT NULL | 采集时间 |
| temperature | DECIMAL(5, 2) | NULL | 温度（℃） |
| humidity | DECIMAL(5, 2) | NULL | 湿度（%） |
| wind_speed | DECIMAL(5, 2) | NULL | 风速（m/s） |
| wind_direction | VARCHAR(10) | NULL | 风向 |
| rainfall | DECIMAL(8, 2) | DEFAULT 0 | 降雨量（mm） |
| sunshine_duration | DECIMAL(5, 2) | DEFAULT 0 | 日照时长（小时） |
| soil_temperature | DECIMAL(5, 2) | NULL | 土壤温度（℃） |
| soil_humidity | DECIMAL(5, 2) | NULL | 土壤湿度（%） |
| soil_ph | DECIMAL(4, 2) | NULL | 土壤pH值 |
| pm25 | DECIMAL(6, 2) | NULL | PM2.5（μg/m³） |
| pm10 | DECIMAL(6, 2) | NULL | PM10（μg/m³） |
| data_status | VARCHAR(20) | DEFAULT '有效' | 数据状态（有效/无效） |
| create_time | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP | 创建时间 |

## 5. 统计分析数据表（statistical_data）

| 字段名 | 数据类型 | 约束 | 描述 |
| ------ | -------- | ---- | ---- |
| stat_id | INT | PRIMARY KEY, AUTO_INCREMENT | 统计ID |
| region_id | INT | NOT NULL, FOREIGN KEY(region_id) REFERENCES region(region_id) ON DELETE CASCADE ON UPDATE CASCADE | 区域ID |
| station_id | INT | NOT NULL, FOREIGN KEY(station_id) REFERENCES monitoring_station(station_id) ON DELETE CASCADE ON UPDATE CASCADE | 站点ID |
| sensor_id | INT | NULL, FOREIGN KEY(sensor_id) REFERENCES sensor(sensor_id) ON DELETE CASCADE ON UPDATE CASCADE | 传感器ID |
| stat_period | VARCHAR(20) | NOT NULL | 统计时间段（日、周、月、季、年） |
| stat_type | VARCHAR(50) | NOT NULL | 统计类型 |
| stat_date | DATE | NOT NULL | 统计日期 |
| avg_temperature | DECIMAL(5, 2) | NULL | 平均温度（℃） |
| max_temperature | DECIMAL(5, 2) | NULL | 最高温度（℃） |
| min_temperature | DECIMAL(5, 2) | NULL | 最低温度（℃） |
| avg_humidity | DECIMAL(5, 2) | NULL | 平均湿度（%） |
| max_humidity | DECIMAL(5, 2) | NULL | 最高湿度（%） |
| min_humidity | DECIMAL(5, 2) | NULL | 最低湿度（%） |
| total_rainfall | DECIMAL(8, 2) | DEFAULT 0 | 总降雨量（mm） |
| avg_wind_speed | DECIMAL(5, 2) | NULL | 平均风速（m/s） |
| max_wind_speed | DECIMAL(5, 2) | NULL | 最大风速（m/s） |
| avg_pm25 | DECIMAL(6, 2) | NULL | 平均PM2.5（μg/m³） |
| avg_pm10 | DECIMAL(6, 2) | NULL | 平均PM10（μg/m³） |
| data_source | VARCHAR(50) | NOT NULL | 数据来源 |
| create_time | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP | 创建时间 |
| update_time | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 更新时间 |

## 6. 报表模板表（report_template）

| 字段名 | 数据类型 | 约束 | 描述 |
| ------ | -------- | ---- | ---- |
| template_id | INT | PRIMARY KEY, AUTO_INCREMENT | 模板ID |
| template_name | VARCHAR(100) | NOT NULL, UNIQUE | 模板名称 |
| report_type | VARCHAR(50) | NOT NULL | 报表类型 |
| template_content | TEXT | NOT NULL | 模板内容 |
| create_time | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP | 创建时间 |
| update_time | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 更新时间 |

## 7. 生成的报表表（generated_report）

| 字段名 | 数据类型 | 约束 | 描述 |
| ------ | -------- | ---- | ---- |
| report_id | INT | PRIMARY KEY, AUTO_INCREMENT | 报表ID |
| template_id | INT | NOT NULL, FOREIGN KEY(template_id) REFERENCES report_template(template_id) ON DELETE CASCADE ON UPDATE CASCADE | 模板ID |
| generate_time | DATETIME | NOT NULL DEFAULT CURRENT_TIMESTAMP | 生成时间 |
| report_name | VARCHAR(100) | NOT NULL | 报表名称 |
| report_content | TEXT | NOT NULL | 报表内容 |
| generated_by | VARCHAR(50) | NOT NULL | 生成人 |

## 8. 异常数据记录表（abnormal_data）

| 字段名 | 数据类型 | 约束 | 描述 |
| ------ | -------- | ---- | ---- |
| abnormal_id | INT | PRIMARY KEY, AUTO_INCREMENT | 异常ID |
| data_id | INT | NOT NULL, FOREIGN KEY(data_id) REFERENCES environmental_data(data_id) ON DELETE CASCADE ON UPDATE CASCADE | 数据ID |
| abnormal_type | VARCHAR(50) | NOT NULL | 异常类型 |
| abnormal_description | TEXT | NOT NULL | 异常描述 |
| discovery_time | DATETIME | NOT NULL DEFAULT CURRENT_TIMESTAMP | 发现时间 |
| processing_status | VARCHAR(20) | DEFAULT '未处理' | 处理状态（未处理、处理中、已处理） |
| processing_time | DATETIME | NULL | 处理时间 |
| processed_by | VARCHAR(50) | NULL | 处理人 |

## 9. 系统用户表（system_user）

| 字段名 | 数据类型 | 约束 | 描述 |
| ------ | -------- | ---- | ---- |
| user_id | INT | PRIMARY KEY, AUTO_INCREMENT | 用户ID |
| username | VARCHAR(50) | NOT NULL, UNIQUE | 用户名 |
| password | VARCHAR(100) | NOT NULL | 密码（加密存储） |
| role | VARCHAR(20) | NOT NULL | 角色（管理员、普通用户、访客） |
| email | VARCHAR(100) | NULL | 邮箱 |
| phone | VARCHAR(20) | NULL | 电话 |
| status | VARCHAR(20) | DEFAULT '启用' | 状态（启用、禁用） |
| create_time | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP | 创建时间 |
| update_time | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 更新时间 |

## 10. 操作日志表（operation_log）

| 字段名 | 数据类型 | 约束 | 描述 |
| ------ | -------- | ---- | ---- |
| log_id | INT | PRIMARY KEY, AUTO_INCREMENT | 日志ID |
| user_id | INT | NULL, FOREIGN KEY(user_id) REFERENCES system_user(user_id) ON DELETE SET NULL ON UPDATE CASCADE | 用户ID |
| operation_type | VARCHAR(50) | NOT NULL | 操作类型 |
| operation_content | TEXT | NOT NULL | 操作内容 |
| operation_time | TIMESTAMP | DEFAULT CURRENT_TIMESTAMP | 操作时间 |
| ip_address | VARCHAR(50) | NULL | IP地址 |
